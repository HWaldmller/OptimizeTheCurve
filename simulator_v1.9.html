<!DOCTYPE HTML>
<html>
<head>

    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <style>
        .myLabel {
            margin-top: 2px;
            margin-bottom: 2px;
        }

        .rangeslider {
            width: 100%;
            height: 18px;
            margin-top: 4px;
            margin-bottom: 4px;
        }


        .slider {
            -webkit-appearance: none;
            background: #e6e3e2;
            width: 10%;
            height: 5px;
            opacity: 2;
            margin-top: 4px;
            margin-bottom: 6px;
            vertical-align: middle;
        }


            .slider::-webkit-slider-thumb {
                -webkit-appearance: none;
                cursor: pointer;
                background: #6e0172;
                width: 15px;
                height: 15px;
                border-radius: 100%;
                opacity: 0.7;
                border: none;
            }

            .slider::-moz-range-thumb {
                -webkit-appearance: none;
                cursor: pointer;
                background: #6e0172;
                width: 15px;
                height: 15px;
                border-radius: 100%;
                opacity: 0.7;
                border: none;
            }

            .slider::-ms-fill-lower {
                background: transparent;
            }

            .slider::-ms-fill-upper {
                background: transparent;
            }

            .slider::-ms-track {
                height: 7px;
                border: 1px solid #e6e3e2;
                background-color: #e6e3e2;
            }

            .slider::-ms-thumb {
                -webkit-appearance: none;
                cursor: pointer;
                background: #6e0172;
                width: 15px;
                height: 15px;
                border-radius: 100%;
                opacity: 0.7;
                border: none;
            }

            .slider:hover {
                opacity: 0.7;
            }






        .row {
            display: flex;
        }

        .col {
            flex: 1;
            padding: 1em;
            border: none;
            background-color: #fdedec;
            background-color: #e6e3e2;
            background-color: #f3f3f2;
        }

        .accordion {
            background-color: #E0ECF8;
            background-color: #dee6f3;
            color: #585858;
            cursor: pointer;
            padding: 4px;
            width: 100%;
            border: 2px 0 0;
            text-align: left;
            outline: none;
            font-size: 18px;
            transition: 0.3s;
        }

            .active, .accordion:hover {
                background-color: #A9D0F5;
                background-color: #9ca1c1;
                color: white;
            }

            .accordion:before {
                content: '\23f7';
                content: '\002B';
                color: #777;
                font-weight: bold;
                float: left;
                margin-left: 2px;
                margin-right: 10px;
            }

            .accordion:hover:before {
                color: white;
                font-weight: bold;
                float: left;
                margin-left: 2px;
                margin-right: 10px;
            }

        .active:before {
            content: '\23f6';
            content: '\2212';
            color: white;
        }

        .panel {
            padding: 0 18px;
            background-color: #EFF5FB;
            background-color: #f9fbfb;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.15s ease-out;
        }
    </style>
</head>

<body>

    <font face="arial" color="black">
        <div align="right" style="margin-bottom:2px">
            <form align="right">
                <label>
                    <select id="languageSelection">
                        <!--<option>English</option>-->
                        <option selected>German</option>
                    </select>
                </label>
                <!--<button type="button" id="exportData">Export</button>-->
            </form>
        </div>
        <div class="wrapper">
            <button class="accordion" id="targetDefinition">Zielsetzung: Keine Kontakteinschränkung, Eindämmung, Abflachung oder Optimierung</button>
            <div class="panel">
                <div>
                    <input type="radio" id="strategyDoNothing" name="strategy" value="doNothing" checked />
                    <label for="strategyDoNothing" id="labelStrategyDoNothing">Keine Kontakteinschränkung</label>
                </div>
                <div>
                    <input type="radio" id="strategySuppression" name="strategy" value="suppression" />
                    <label for="strategySuppression" id="labelStrategySuppression"><span title="Ziel dieser Strategie ist, die Zahl der Neuinfektionen auf ein so niedriges Maß zu bringen, dass einzelne Infektionsketten wieder nachverfolgt werden können. Dazu sind viele Tests und ausreichend Kapazität zur Nachverfolgung von Kontaktpersonen notwendig.">Eindämmung: Maximale Einschränkung der Kontakte zur Minimierung der Zahl der Neuinfektionen</span></label>
                </div>
                <div>
                    <input type="radio" id="strategySimpleMitigation" name="strategy" value="simpleMitigation" />
                    <label for="strategySimpleMitigation" id="labelStrategySimpleMitigation">Abflachung: Gleichbleibende Einschränkung der Kontakte ohne Überlastung des Gesundheitswesens</label>
                </div>
                <div>
                    <input type="radio" id="strategyAdvancedMitigation" name="strategy" value="advancedMitigation" />
                    <label for="strategyAdvancedMitigation" id="labelStrategyAdvancedMitigation">Optimierung: Täglich angepasste, minimale Einschränkung der Kontakte ohne Überlastung des Gesundheitswesens</label>
                </div>
                <div>
                    <input type="radio" id="strategyInfectionRate" name="strategy" value="infectionRate" />
                    <label for="strategyInfectionRate" id="labelStrategyInfectionRate">Aktuelle Strategie: Lockdown bei Neuinfektionszahlen größer 50 je 100.000 Menschen je Woche</label>
                </div>
            </div>
            <button class="accordion" id="labelCosiderationRiskGroup">Berücksichtigung der Risikogruppen</button>
            <div class="panel">
                <div>
                    <input type="radio" id="optionEntire" name="option" value="entire" checked />
                    <label id="labelOptionEntire" for="optionEntire">Keine besondere Berücksichtigung von Risikogruppen</label>
                </div>
                <div>
                    <input type="radio" id="optionOnlyLowRisk" name="option" value="onlyLowRisk" />
                    <label id="labelOptionOnlyLowRisk" for="optionOnlyLowRisk">Spezieller Schutz für die Gruppe mit hohem Intensiv-Risiko</label>
                </div>
                <div>
                    <input type="radio" id="optionOnlyLowRiskPlusLockdown" name="option" value="onlyLowRiskPlusLockdown" />
                    <label id="labelOptionOnlyLowRiskPlusLockdown" for="optionOnlyLowRiskPlusLockdown"> <span title="Sobald ausreichend Menschen gegen das Virus immun sind, breitet sich das Virus nicht mehr epidemieartig aus. Da es zu dem Zeitpunkt noch sehr viele Infizierte gibt, besteht für die Risikogruppe weiterhin ein akutes Ansteckungsrisiko. Der 3-wöchige Lockdown führt zu einem schnellen Abklingen der Infektionen.">Spezieller Schutz für die Gruppe mit hohem Intensiv-Risiko inkl. abschließender 3-wöchiger Lockdown</span></label>
                </div>
            </div>

            <button class="accordion">Modellierungsparameter</button>
            <div class="panel">
                <div class="rangeslider">
                    <input type="range" min="0" max="10000000000" value="83000000" step="10000"
                           class="slider" id="sliderPopulation">
                    <input type="number" size="14" id="inputPopulation" min="0" max="10000000000" lang="de-de" step="10000" style="text-align: center" />
                    Die Bevölkerung besteht aus <b><span type="number" id="displayPopulation"></span> Menschen</b>.
                </div>
                <div class="rangeslider">
                    <input type="range" min="0" max="100000" value="60000" step="100"
                           class="slider" id="sliderInitiallyInfected">
                    <input type="number" size="14" id="inputInitiallyInfected" min="0" max="10000000000" step="100" style="text-align: center"/>
                    Zu Beginn sind <b><span id="displayInitiallyInfected"></span> Menschen</b> als ansteckend registriert.
                </div>
                <div class="rangeslider">
                    <input type="range" min="0" max="1" value="0.41" step="0.01"
                           class="slider" id="sliderTransmissionRate">
                    <input type="number" size="14" id="inputTransmissionRate" step="0.01" style="text-align: center" min="0" max="10000000"/>
                    Der Ausbreitungsfaktor beträgt <b><span id="displayTransmissionRate"></span></b>. Ein Mensch steckt zu Beginn im Schnitt <b><span id="displayR0_1"></span></b> andere an.
                </div>
                <div class="rangeslider">
                    <input type="range" min="1" max="100" value="15" step="1"
                           class="slider" id="sliderRecoveryRate">
                    <input type="number" size="14" id="inputRecoveryRate" min="0" max="10000000000" step="1" style="text-align: center" />
                    Jeden Tag verringert sich die Anzahl der Ansteckenden um <b><span id="displayRecoveryRate"></span>%</b>. Ein Mensch steckt zu Beginn im Schnitt <b><span id="displayR0_2"></span></b> andere an.
                </div>
                <div class="rangeslider">
                    <input type="range" min="0" max="100" value="28"
                           class="slider" id="sliderHighRiskPopulation">
                    <input type="number" size="14" id="inputHighRiskPopulation" min="0" max="10000000000" step="1" style="text-align: center" />
                    <b><span id="displayHighRiskPopulation"></span>%</b> der Bevölkerung haben ein hohes Intensiv-Risiko.
                </div>
                <div class="rangeslider">
                    <input type="range" min="0" max="1000" value="992"
                           class="slider" id="sliderICUPercentageHighRisk">
                    <input type="number" size="14" id="inputICUPercentageHighRisk" min="0" max="10000000" step="0.01" style="text-align: center" />
                    In der Gruppe mit hohem Intensiv-Risiko sind <b><span id="displayICUPercentageHighRisk"></span>%</b> der bestätigten Infizierten intensiv-pflichtig.
                </div>
                <div class="rangeslider">
                    <input type="range" min="0" max="1000" value="38"
                           class="slider" id="sliderICUPercentageLowRisk">
                    <input type="number" size="14" id="inputICUPercentageLowRisk" min="0" max="10000000" step="0.01" style="text-align: center" />
                    In der Gruppe mit niedrigem Intensiv-Risiko sind <b><span id="displayICUPercentageLowRisk"></span>%</b> der bestätigten Infizierten intensiv-pflichtig.
                </div>
                <div class="rangeslider">
                    <input type="range" min="0" max="100" value="100"
                           class="slider" id="sliderRatioHighRiskGroupCompliance">
                    <input type="number" size="14" id="inputRatioHighRiskGroupCompliance" min="0" max="10000000000" step="1" style="text-align: center" />
                    Die Gruppe mit hohem Intensiv-Risiko beteiligt sich zu <b><span id="displayRatioHighRiskGroupCompliance"></span>%</b> an der besonderen Absicherung.
                </div>
                <div class="rangeslider">
                    <input type="range" min="1" max="10" value="1"
                           class="slider" id="sliderFactorUnregistered">
                    <input type="number" size="14" id="inputFactorUnregistered" min="0" max="10000000000" step="1" style="text-align: center" />
                    Von <b><span id="displayFactorUnregistered"></span></b> Infizierten wird eine(r) erkannt und registriert.
                </div>
                <div class="rangeslider">
                    <input type="range" min="0" max="30" value="8"
                           class="slider" id="sliderDelayTime">
                    <input type="number" size="14" id="inputDelayTime" min="0" max="10000000000" step="1" style="text-align: center" />
                    Infizierte werden <b><span id="displayDelayTime"></span> Tag(e)</b> nach der Infektion registriert (Inkubationszeit, Testverzug und Meldeverzug).
                </div>
                <div class="rangeslider">
                    <input type="range" min="0" max="20" value="10"
                           class="slider" id="sliderUncertaintyModelParameters">
                    <input type="number" size="14" id="inputUncertaintyModelParameters" min="0" max="10000000000" step="1" style="text-align: center" />
                    Die Parameter für die Ausbreitungsgeschwindigkeit sind bis auf <b><span id="displayUncertaintyModelParameters"></span>%</b> genau bekannt.
                </div>
                <div class="rangeslider">
                    <input type="range" min="0" max="20" value="10"
                           class="slider" id="sliderUncertaintyAntibodyTest">
                    <input type="number" size="14" id="inputUncertaintyAntibodyTest" min="0" max="10000000000" step="1" style="text-align: center" />
                    Die Anzahl der Empfänglichen lässt sich über Antikörpertests bis auf <b><span id="displayUncertaintyAntibodyTest"></span>%</b> genau bestimmen.
                </div>
                <div class="rangeslider">
                    <input type="range" min="0" max="20" value="10"
                           class="slider" id="sliderUncertaintyRatio">
                    <input type="number" size="14" id="inputUncertaintyRatio" min="0" max="10000000000" step="1" style="text-align: center" />
                    Das Risiko einer Intensivpflicht ist bis auf <b><span id="displayUncertaintyRatio"></span>%</b> genau bekannt.
                </div>
            </div>

            <button class="accordion">Kapazität des Gesundheitswesens</button>
            <div class="panel">
                <div class="rangeslider">
                    <input type="range" min="0" max="50000" value="20000" step="100"
                           class="slider" id="sliderCapacity">
                    <input type="number" size="14" id="inputCapacity" min="0" max="10000000000" step="100" style="text-align: center" />
                    Zu Beginn der Simulation stehen <b><span id="displayCapacity"></span> Intensivbetten</b> für die Behandlung von COVID-19 Patient:Innen zur Verfügung.
                </div>
                <div class="rangeslider">
                    <input type="range" min="0" max="500" value="100" step="10"
                           class="slider" id="sliderCapacityIncrease">
                    <input type="number" size="14" id="inputCapacityIncrease" min="0" max="10000000000" step="10" style="text-align: center" />
                    Täglich werden <b><span id="displayCapacityIncrease"></span> neue Intensivbetten</b> für die Behandlung von COVID-19 Patient:Innen geschaffen.
                </div>
            </div>

            <button class="accordion">Kontakteinschränkung (Physical Distancing)</button>
            <div class="panel">
                <div class="rangeslider">
                    <input type="range" min="0" max="100" value="30"
                           class="slider" id="sliderLowerLevel">
                    <input type="number" size="14" id="inputLowerLevel" min="0" max="10000000000" step="1" style="text-align: center" />
                    In Phasen hoher Kontaktreduktion finden durchschnittlich noch <b><span id="displayLowerLevel"></span>%</b> der gewöhnlichen Kontakte statt.
                </div>

                <div class="rangeslider">
                    <input type="range" min="0" max="100" value="100"
                           class="slider" id="sliderHigherLevel">
                    <input type="number" size="14" id="inputHigherLevel" min="0" max="10000000000" step="1" style="text-align: center" />
                    In Phasen geringer Kontaktreduktion finden durchschnittlich noch <b><span id="displayHigherLevel"></span>%</b> der gewöhnlichen Kontakte statt.
                </div>
                <div class="rangeslider">
                    <input type="range" min="0" max="10" value="5"
                           class="slider" id="sliderUncertaintyInteraction">
                    <input type="number" size="14" id="inputUncertaintyInteraction" min="0" max="10000000000" step="1" style="text-align: center" />
                    Die täglichen Kontakte weichen um bis zu <b><span id="displayUncertaintyInteraction"></span>%-Punkte</b> von den durchschnittlichen Kontakten ab.
                </div>
                <div class="rangeslider">
                    <input type="range" min="0" max="730" value="180"
                           class="slider" id="sliderEndDate">
                    <input type="number" size="14" id="inputEndDate" min="0" max="10000000000" step="1" style="text-align: center" />
                    Nach <b><span id="displayEndDate"></span> Tag(en)</b> dürfen alle uneingeschränkten Kontakt zu anderen Personen aus der Gesamtgruppe haben.
                </div>
                <div class="rangeslider">
                    <input type="range" min="0" max="100" value="85"
                           class="slider" id="sliderInteractionAfterEndDate">
                    <input type="number" size="14" id="inputInteractionAfterEndDate" min="0" max="10000000000" step="1" style="text-align: center" />
                    Nach Beendigung der Maßnahmen treten durchschnittlich <b><span id="displayInteractionAfterEndDate"></span>%</b> der gewöhnlichen Kontakte auf.
                </div>
            </div>

            <button class="accordion">Simulationsparameter</button>
            <div class="panel">
                <div class="rangeslider">
                    <input type="range" min="30" max="730" value="360" step="10"
                           class="slider" id="sliderDuration">
                    <input type="number" size="14" id="inputDuration" min="0" max="10000000000" step="1" style="text-align: center" />
                    Es wird der Zeitraum der nächsten <b><span id="displayDuration"></span>Tagen</b> simuliert.
                </div>

                <div class="rangeslider">
                    <input type="range" min="10" max="100" value="10"
                           class="slider" id="sliderSimulations">
                    <input type="number" size="14" id="inputSimulations" min="0" max="10000000000" step="1" style="text-align: center" />
                    Für die Statistik werden <b><span id="displaySimulations"></span> Simulationen</b> durchgeführt.
                </div>
            </div>
        </div>

        <button class="accordion">Erläuterungen</button>
        <div class="panel">
            <p>
                <div>
                    <b>Abbildung A:</b> Die Grafik zeigt das Verhältnis zwischen dem voraussichtlichen Bedarf an Intensivbetten (blau) und der Verfügbarkeit (rot).
                    Der hellblaue Bereich zeigt die Unsicherheit, also mögliche Abweichungen.
                    Nach oben der größtmögliche und nach unten der minimale Bedarf (statistisches Streuband).
                    Die Anzahl der Simulationen bestimmt das statistische Streuband.
                    Die Form der blauen Linie wird vor allem von dem Maß an sozialen Kontakten bestimmt (siehe Abbildung C).
                </div>
            </p>
            <p>
                <div>
                    <b>Abbildung B:</b> Empfänglich (susceptible) sind nach derzeitigem Wissenstand alle bisher nicht Infizierten (infected) und nicht Genesenen oder Verstorbenen (recovered).
                    Besonders gekennzeichnet ist zum einen der Zeitpunkt, an dem ausreichend Menschen gegen SARS CoV2 immun sind, so dass es zu keinem epidemischen Ausbruch der Krankheit mehr kommt, also die sogenannte Herdenimmunität erreicht ist.
                    Zum anderen der Zeitpunkt, an dem es wieder so wenige Infizierte gibt wie zu Beginn der Simulation.
                </div>
            </p>
            <p>
                <div>
                    <b>Abbildung C:</b> Die Grafik zeigt, wie stark die physischen Kontakte an jedem Tag eingeschränkt werden müssen (gelb) und wie gut dies gelingt (blau).
                    33% bedeutet, dass ein Drittel der gewöhnlichen Kontakte vermieden werden müssen, als einer von drei.
                    Die Abweichung zwischen den beiden Kurven zeigt die Unsicherheit in der Umsetzung der erforderlichen Kontaktzahl und lässt sich über einen Parameter einstellen.
                </div>
            </p>
            <p>
                <div>
                    <b>Abbildung D:</b> Wir gehen in Anlehnung an den <a href="https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Situationsberichte/2020-04-12-de.pdf">Lagebericht der RKI vom 12. April 2020</a> davon aus, dass 29% der intensiv-pflichtigen Patienten versterben, solange die Kapazität an Intensivbetten ausreicht. Für Fälle jenseits der Kapazitätsgrenze rechnen wir mit 100%. Zur Einordnung der Anzahl der Verstorbenen seien folgende Vergleichzahlen genannt: In Deutschland sterben jährlich zwischen 800.000 und 900.000 Menschen, die meisten davon an Kreislauferkrankungen und Krebs. Aber auch etwa 72.000 Menschen sterben jährlich an infektiösen Krankheiten und Krankheiten des Atmungssystems (siehe <a href="https://www.rki.de/DE/Content/Gesundheitsmonitoring/Gesundheitsberichterstattung/GBEDownloadsT/sterblichkeit.pdf">Bericht des RKI</a>). Laut einem Bericht der ZEIT sterben jährlich etwa 120.000 Menschen an den Folgen des Rauchens und etwa 74.000 Menschen an den Folgen von Alkoholkonsum oder eine Kombination aus Alkohol- und Tabakkonsum (siehe <a href="https://www.zeit.de/wissen/gesundheit/2015-05/drogenbericht-dhs-drogen-konsum-deutschland">Bericht der ZEIT</a>).
                    An Selbstmord sterben etwa 10.000 Menschen (siehe <a href="https://www-genesis.destatis.de/genesis/online?sequenz=tabelleErgebnis&selectionname=23211-0002&sachmerkmal=TODUR1&sachschluessel=TODESURS78&startjahr=1980">Bericht des Statistisches Bundesamts</a>) und in Verkehrsunfällen etwa 3.000 (siehe <a href="https://www.destatis.de/DE/Themen/Gesellschaft-Umwelt/Verkehrsunfaelle/_inhalt.html">Bericht des Statistisches Bundesamts</a>).
                </div>
            </p>
        </div>

        <div class="row">
            <div class="col">
                <div id="curve_chart_2" style="width: 100%; height: 300px"></div>
            </div>
            <div class="col">
                <div id="curve_chart" style="width: 100%; height: 300px"></div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <div id="curve_chart_3" style="width: 100%; height: 300px"></div>
            </div>
            <div class="col">
                <div id="curve_chart_4" style="width: 100%; height: 300px"></div>
            </div>
        </div>


        <!--
        Erläuterung:
        <p>
            30% Kontakteinschränkung entspricht in etwa den Maßnahmen der Absage von Großeveranstaltungen (z.B. Fußballspiele mit Publikum, Messen) und der Abriegelung besonders betroffener Gebiete.
            Eine 70%-ige Kontakteinschränkung entspricht den zusätzlichen Maßnahmen der Schließungen von Universitäten, Schulen, Kindergärten, Kitas, Museen, Theatern, Restaurants, Bars, Kneipen, Geschäften (ausgenommen solchen des täglichen Bedarfs) sowie Maßnahmen wie großflächiges Homeoffice und Kontakteinschränkungen auf maximal zwei Personen in der Freizeit.
            Durch zusätzliche Hygienemaßnahmen wie das Tragen von Mundschutz in öffentlichen Räumen (öffentlichen Nahverkehr, Geschäften, Bildungseinrichtungen, Praxen, etc.) und die Desinfektion der Hände beim Betreten derselben können 70% Kontaktreduktion auch mit weniger massiven Schließungen erreicht werden.
        </p>
        -->

        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <script type="text/javascript">

            var alpha = 0.41;//6.8E-9 * 60300000;      // growth factor
            var beta = 0.15;                    // recovery factor
            var modelUncertainty = 0.1;         // uncertainty in model parameters (0.1 corresponds to 10%)
            var ICUcapacity = 20000;            // initial capacity of ICUs
            var addCapacity = 100;              // capacity in ICUs added every day
            var uInaccur = 0.05;                // inaccuracy of setting interaction level
            var darkRatio = 1;                  // factor by which true number of infections differs from registered number
            var upperLevel = 1.0;               // high level of social interaction (min=0; max=1.0)
            var lowerLevel = 0.3;               // low level of social interaction (min=0; max=1.0)
            var finalLevel = 0.85;              // level of interaction after measures have been revoked
            var numberCycles = 10;              // number of simulation cycles
            var T = 360;                        // time steps for simulation (number of days)
            var Npop = 83000000;                // population size
            var initialInfected = 60000;        // number of invividuals initially infected
            var portionHighRisk = 0.28          // fraction of the population at high risk
            var endDate = 180;                  // day at which the restrictions are revoked
            var strategy = 0;                   // 0: do nothing; 1: suppression; 2: flatten the curve; 3: optimize the curve
            var option = 0;                     // 0: entire population; 1: low-risk population; 2: including 3-week lockdown
            var ratioHighRisk = 0.0992;         // ratio of infections leading to ICU requirement for entire population
            var ratioLowRisk = 0.0038;          // ratio of infections leading to ICU requirement for low risk population
            var delay = 8;                      // time steps that registration is delayed with respect to infection
            var R0 = 2.733;                     // basic reproduction number
            var newInfections;                  // new infections over a week

            var accuracyAntibodyTests = 0.1;    // accuracy of the antibody tests
            var uncertaintyRatios = 0.1;        // uncertainty of the ratioHighRisk and ratioLowRisk
            var ratioHighRiskCompliance = 1;    // ratio of compliance of high risk group with measures

            var language = 1;                   // language: 0: english, 1: german
            var graphFontSize = 16;

            var titles = [];
            var graphAnnotations = [];
            var seriesLabels = [];

            var simData = [];

            for (i = 0; i < 730 + 1; i++) {
                simData[i] = [];
            }

            for (i = 0; i < 4; i++) {
                titles[i] = [];
            }
            for (i = 0; i < 6; i++) {
                graphAnnotations[i] = [];
            }
            for (i = 0; i < 10; i++) {
                seriesLabels[i] = [];
            }

            titles[0][0] = 'Figure A: Capacity of health care system';
            titles[0][1] = 'Abbildung A: Kapazitäten im Gesundheitswesen';

            titles[1][0] = 'Figure B: Infections and immunity in the population';
            titles[1][1] = 'Abbildung B: Infizierung und Immunität in der Bevölkerung';

            titles[2][0] = 'Figure C: Contact reduction';
            titles[2][1] = 'Abbildung C: Kontakteinschränkungen';

            titles[3][0] = 'Figure D: Deceased';
            titles[3][1] = 'Abbildung D: Verstorbene';

            graphAnnotations[0][0] = 'Risk group separated';
            graphAnnotations[0][1] = 'Risikogruppe geschützt';

            graphAnnotations[1][0] = 'Risk group integrated';
            graphAnnotations[1][1] = 'Schutz für Risikogruppe aufgehoben';

            graphAnnotations[2][0] = 'Herd immunity always reached';
            graphAnnotations[2][1] = 'Herdenimmunität immer erreicht';

            graphAnnotations[3][0] = 'Herd immunity not always reached';
            graphAnnotations[3][1] = 'Herdenimmunität nicht immer erreicht';

            graphAnnotations[4][0] = 'Always lower risk of infections';
            graphAnnotations[4][1] = 'Ansteckungsrisiko immer reduziert';

            graphAnnotations[5][0] = 'Not always lower risk of infections';
            graphAnnotations[5][1] = 'Ansteckungsrisiko nicht immer reduziert';

            seriesLabels[0][0] = 'Time [days]';
            seriesLabels[0][1] = 'Zeit [Tage]';

            seriesLabels[1][0] = 'Available intensive care units';
            seriesLabels[1][1] = 'Plätze auf Intensivstation';

            seriesLabels[2][0] = 'Required intensive care units';
            seriesLabels[2][1] = 'Patienten auf Intensivstation';

            seriesLabels[3][0] = 'Susceptible';
            seriesLabels[3][1] = 'Empfängliche';

            seriesLabels[4][0] = 'Infectious';
            seriesLabels[4][1] = 'Ansteckende';

            seriesLabels[5][0] = 'Recovered/Deceased';
            seriesLabels[5][1] = 'Genesene/Verstorbene';

            seriesLabels[6][0] = 'Effective';
            seriesLabels[6][1] = 'Umsetzung';

            seriesLabels[7][0] = 'Desired';
            seriesLabels[7][1] = 'Vorgabe';

            seriesLabels[8][0] = '14-days average';
            seriesLabels[8][1] = '14-tägiger Durchschnitt';

            seriesLabels[9][0] = 'Deceased';
            seriesLabels[9][1] = 'Verstorbene';

            var transLabelReference = [];
            transLabelReference[0] = document.getElementById("targetDefinition");
            transLabelReference[1] = document.getElementById("labelStrategyDoNothing");
            transLabelReference[2] = document.getElementById("labelStrategySuppression");
            transLabelReference[3] = document.getElementById("labelStrategySimpleMitigation");
            transLabelReference[4] = document.getElementById("labelStrategyAdvancedMitigation");
            transLabelReference[5] = document.getElementById("labelCosiderationRiskGroup");
            transLabelReference[6] = document.getElementById("labelOptionEntire");
            transLabelReference[7] = document.getElementById("labelOptionOnlyLowRisk");
            transLabelReference[8] = document.getElementById("labelOptionOnlyLowRiskPlusLockdown");



            var transLabelDescription = [];
            for (i = 0; i < 12; i++) {
                transLabelDescription[i] = [];
            }

            transLabelDescription[0][0] = 'Target: No contact reduction, suppression, mitigation or optimization';
            transLabelDescription[0][1] = 'Zielsetzung: Keine Kontakteinschränkung, Eindämmung, Abflachung oder Optimierung';

            transLabelDescription[1][0] = 'No contact reduction';
            transLabelDescription[1][1] = 'Keine Kontakteinschränkung';

            transLabelDescription[2][0] = 'Suppression: Maximum reduction of contact in order to minimize the number of new infections';
            transLabelDescription[2][1] = 'Eindämmung: Maximale Einschränkung der Kontakte zur Minimierung der Zahl der Neuinfektionen';

            transLabelDescription[3][0] = 'Mitigation: Constant reduction of contacts to prevent an overload of the health care system';
            transLabelDescription[3][1] = 'Abflachung: Gleichbleibende Einschränkung der Kontakte ohne Überlastung des Gesundheitswesens';

            transLabelDescription[4][0] = 'Optimization: Daily adjusted minimal reduction of contacts without overloading the health care system';
            transLabelDescription[4][1] = 'Optimierung: Täglich angepasste, minimale Einschränkung der Kontakte ohne Überlastung des Gesundheitswesens';

            transLabelDescription[5][0] = 'Treatment of high risk group';
            transLabelDescription[5][1] = 'Berücksichtigung der Risikogruppen';

            transLabelDescription[6][0] = 'No special treatment of high risk group';
            transLabelDescription[6][1] = 'Keine besondere Berücksichtigung der Risikogruppen';

            transLabelDescription[7][0] = 'Special protection of high risk group';
            transLabelDescription[7][1] = 'Spezieller Schutz für die Gruppe mit hohem Intesiv-Risiko';

            transLabelDescription[8][0] = 'Special protection of high risk group and subsequent 3-week lockdown';
            transLabelDescription[8][1] = 'Spezieller Schutz für die Gruppe mit hohem Intesiv-Risiko und anschließender 3-wöchiger Lockdown';

            transLabelDescription[9][0] = 'Model parameters';
            transLabelDescription[9][1] = 'Modellierungsparameter';

            transLabelDescription[10][0] = 'The population consists of';
            transLabelDescription[10][1] = 'Die Bevölkerung besteht aus';

            transLabelDescription[11][0] = 'people.';
            transLabelDescription[11][1] = 'Menschen.';


            function translateMenu() {
                for (i = 0; i < 9; i++) {
                    transLabelReference[i].textContent = transLabelDescription[i][language];
                }
            }

            // react to change in language setting
            var languageSel = document.getElementById("languageSelection");
            languageSel.onchange = function () {
                language = this.selectedIndex;
                console.log(language);
                translateMenu();
                calculate();
            }

            // react to export data
            /*
            var exportDataDocument = document.getElementById("exportData");
            exportDataDocument.onclick = function () {
                console.log("Write file");
                var writeData = [];
                writeData[0] = "\ufeff";
                for (i = 0; i < T+1; i++) {
                    writeData[2 * i + 1] = simData[i];
                    writeData[2 * i + 2] = "\n"
                }
                csv = new Blob(writeData, { type: "text/csv;charset=ISO-8859-1", endings:'native' });

                var link = document.createElement('a');
                link.style.display = "";
                console.log(csv);
                link.setAttribute('href', window.URL.createObjectURL(csv));
                console.log(encodeURIComponent(csv));
                link.setAttribute('download', 'export.csv');
                document.body.append(link);
                link.click();
                document.body.removeChild(link);
            }
            */





            var accordion = document.getElementsByClassName("accordion");
            var i;

            for (i = 0; i < accordion.length; i++) {
                accordion[i].addEventListener("click", function () {
                    this.classList.toggle("active");
                    var panel = this.nextElementSibling;
                    if (panel.style.maxHeight) panel.style.maxHeight = null;
                    else panel.style.maxHeight = panel.scrollHeight + "px";
                });
            }



            // get parameters from user interfacce

            // set parameters for target of no restrictions
            var radioButtonStrategy = document.getElementById("strategyDoNothing");
            radioButtonStrategy.onchange = function () {
                strategy = 0;
                rangesliderLowerLevel.value = 100;
                outputLowerLevel.innerHTML = 100;
                inputLowerLevel.value = 100;
                lowerLevel = 1;
                rangesliderHigherLevel.value = 100;
                outputHigherLevel.innerHTML = 100;
                inputHigherLevel.value = 100;
                upperLevel = 1;
                calculate();
            }

            // set parameters for target of suppression
            var radioButtonStrategy = document.getElementById("strategySuppression");
            radioButtonStrategy.onchange = function () {
                strategy = 1;
                rangesliderLowerLevel.value = 30;
                outputLowerLevel.innerHTML = 30;
                inputLowerLevel.value = 30;
                lowerLevel = 0.3;
                rangesliderHigherLevel.value = 30;
                outputHigherLevel.innerHTML = 30;
                inputHigherLevel.value = 30;
                upperLevel = 0.3;
                calculate();
            }

            // set parameters for target of optimization
            var radioButtonStrategy = document.getElementById("strategySimpleMitigation");
            radioButtonStrategy.onchange = function () {
                strategy = 2;
                if (option == 0) {
                    rangesliderLowerLevel.value = 37;
                    outputLowerLevel.innerHTML = 37;
                    inputLowerLevel.value = 37;
                    lowerLevel = 0.37;
                    rangesliderHigherLevel.value = 37;
                    outputHigherLevel.innerHTML = 37;
                    inputHigherLevel.value = 37;
                    upperLevel = 0.37;
                }
                else {
                    rangesliderLowerLevel.value = 43;
                    outputLowerLevel.innerHTML = 43;
                    inputLowerLevel.value = 37;
                    lowerLevel = 0.43;
                    rangesliderHigherLevel.value = 43;
                    outputHigherLevel.innerHTML = 43;
                    inputHigherLevel.value = 37;
                    upperLevel = 0.43;
                }
                calculate();
            }

            // set parameters for target of optimization
            var radioButtonStrategy = document.getElementById("strategyAdvancedMitigation");
            radioButtonStrategy.onchange = function () {
                strategy = 3;
                rangesliderLowerLevel.value = 30;
                outputLowerLevel.innerHTML = 30;
                inputLowerLevel.value = 30;
                lowerLevel = 0.3;
                rangesliderHigherLevel.value = 100;
                outputHigherLevel.innerHTML = 100;
                inputHigherLevel.value = 100;
                upperLevel = 1.0;
                calculate();
            }

            // set parameters for target of optimization
            var radioButtonStrategy = document.getElementById("strategyInfectionRate");
            radioButtonStrategy.onchange = function () {
                strategy = 4;
                rangesliderLowerLevel.value = 30;
                outputLowerLevel.innerHTML = 30;
                inputLowerLevel.value = 30;
                lowerLevel = 0.3;
                rangesliderHigherLevel.value = 70;
                outputHigherLevel.innerHTML = 70;
                inputHigherLevel.value = 70;
                upperLevel = 0.7;
                calculate();
            }

            // set parameters for option 0
            var radioButtonStrategy = document.getElementById("optionEntire");
            radioButtonStrategy.onchange = function () {
                option = 0;
                if (strategy == 2) {
                    rangesliderLowerLevel.value = 37;
                    outputLowerLevel.innerHTML = 37;
                    inputLowerLevel.value = 37;
                    lowerLevel = 0.37;
                    rangesliderHigherLevel.value = 37;
                    outputHigherLevel.innerHTML = 37;
                    inputHigherLevel.value = 37;
                    upperLevel = 0.37;
                }
                calculate();
            }

            // set parameters for option 1
            var radioButtonStrategy = document.getElementById("optionOnlyLowRisk");
            radioButtonStrategy.onchange = function () {
                option = 1;
                if (strategy == 2) {
                    rangesliderLowerLevel.value = 43;
                    outputLowerLevel.innerHTML = 43;
                    inputLowerLevel.value = 43;
                    lowerLevel = 0.43;
                    rangesliderHigherLevel.value = 43;
                    outputHigherLevel.innerHTML = 43;
                    inputHigherLevel.value = 43;
                    upperLevel = 0.43;
                }
                calculate();
            }

            // set parameters for option 2
            var radioButtonStrategy = document.getElementById("optionOnlyLowRiskPlusLockdown");
            radioButtonStrategy.onchange = function () {
                option = 2;
                if (strategy == 2) {
                    rangesliderLowerLevel.value = 43;
                    outputLowerLevel.innerHTML = 43;
                    inputLowerLevel.value = 43;
                    lowerLevel = 0.43;
                    rangesliderHigherLevel.value = 43;
                    outputHigherLevel.innerHTML = 43;
                    inputHigherLevel.value = 43;
                    upperLevel = 0.43;
                }
                calculate();
            }


            var rangesliderPopulation = document.getElementById("sliderPopulation");
            var outputPopulation = document.getElementById("displayPopulation");
            outputPopulation.innerHTML = Intl.NumberFormat().format(rangesliderPopulation.value);
            rangesliderPopulation.onchange = function () {
                outputPopulation.innerHTML = Intl.NumberFormat().format(this.value);
                inputPopulation.value = this.value;
                Npop = Math.round(this.value);
                calculate();
            }
            var inputPopulation = document.getElementById("inputPopulation");
            inputPopulation.value = rangesliderPopulation.value;
            inputPopulation.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > 10000000000) this.value = 10000000000;
                outputPopulation.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderPopulation.value = this.value;
                Npop = Math.round(this.value);
                if (Npop < initialInfected) {
                    initialInfected = Npop;
                    inputInitiallyInfected.value = initialInfected;
                    rangesliderInitiallyInfected.value = initialInfected;
                    outputInitiallyInfected.innerHTML = Intl.NumberFormat().format(initialInfected);
                }
                calculate();
            }


            var rangesliderInitiallyInfected = document.getElementById("sliderInitiallyInfected");
            var outputInitiallyInfected = document.getElementById("displayInitiallyInfected");
            outputInitiallyInfected.innerHTML = Intl.NumberFormat().format(rangesliderInitiallyInfected.value);
            rangesliderInitiallyInfected.onchange = function () {
                outputInitiallyInfected.innerHTML = Intl.NumberFormat().format(this.value);
                inputInitiallyInfected.value = this.value;
                initialInfected = Math.round(this.value);
                calculate();
            }
            var inputInitiallyInfected = document.getElementById("inputInitiallyInfected");
            inputInitiallyInfected.value = rangesliderInitiallyInfected.value;
            inputInitiallyInfected.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > Npop) this.value = Npop;
                outputInitiallyInfected.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderInitiallyInfected.value = this.value;
                initialInfected = Math.round(this.value);
                calculate();
            }


            var textR0_1 = document.getElementById("displayR0_1");
            textR0_1.innerHTML = Intl.NumberFormat().format(R0)
            var textR0_2 = document.getElementById("displayR0_2");
            textR0_2.innerHTML = Intl.NumberFormat().format(R0)

            var rangesliderTransmissionRate = document.getElementById("sliderTransmissionRate");
            var outputTransmissionRate = document.getElementById("displayTransmissionRate");
            outputTransmissionRate.innerHTML = Intl.NumberFormat().format(rangesliderTransmissionRate.value);
            rangesliderTransmissionRate.onchange = function () {
                outputTransmissionRate.innerHTML = Intl.NumberFormat().format(this.value);
                inputTransmissionRate.value = this.value;
                alpha = this.value;
                R0 = alpha / beta;
                textR0_1.innerHTML = Intl.NumberFormat().format(R0);
                textR0_2.innerHTML = Intl.NumberFormat().format(R0);
                calculate();
            }
            var inputTransmissionRate = document.getElementById("inputTransmissionRate");
            inputTransmissionRate.value = rangesliderTransmissionRate.value;
            inputTransmissionRate.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > Npop) this.value = Npop;
                outputTransmissionRate.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderTransmissionRate.value = this.value;
                alpha = this.value;
                R0 = alpha / beta;
                textR0_1.innerHTML = Intl.NumberFormat().format(R0);
                textR0_2.innerHTML = Intl.NumberFormat().format(R0);
                calculate();
            }


            var rangesliderRecoveryRate = document.getElementById("sliderRecoveryRate");
            var outputRecoveryRate = document.getElementById("displayRecoveryRate");
            outputRecoveryRate.innerHTML = rangesliderRecoveryRate.value;
            rangesliderRecoveryRate.onchange = function () {
                outputRecoveryRate.innerHTML = this.value;
                inputRecoveryRate.value = this.value;
                beta = this.value / 100;
                R0 = alpha / beta;
                textR0_1.innerHTML = Intl.NumberFormat().format(R0)
                textR0_2.innerHTML = Intl.NumberFormat().format(R0);
                calculate();
            }
            var inputRecoveryRate = document.getElementById("inputRecoveryRate");
            inputRecoveryRate.value = rangesliderRecoveryRate.value;
            inputRecoveryRate.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > 100) this.value = 100;
                outputRecoveryRate.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderRecoveryRate.value = this.value;
                beta = this.value / 100;
                R0 = alpha / beta;
                textR0_1.innerHTML = Intl.NumberFormat().format(R0);
                textR0_2.innerHTML = Intl.NumberFormat().format(R0);
                calculate();
            }


            var rangesliderHighRiskPopulation = document.getElementById("sliderHighRiskPopulation");
            var outputHighRiskPopulation = document.getElementById("displayHighRiskPopulation");
            outputHighRiskPopulation.innerHTML = rangesliderHighRiskPopulation.value;
            rangesliderHighRiskPopulation.onchange = function () {
                outputHighRiskPopulation.innerHTML = this.value;
                inputHighRiskPopulation.value = this.value;
                portionHighRisk = Math.round(this.value) / 100;
                calculate();
            }
            var inputHighRiskPopulation = document.getElementById("inputHighRiskPopulation");
            inputHighRiskPopulation.value = rangesliderHighRiskPopulation.value;
            inputHighRiskPopulation.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > 100) this.value = 100;
                outputHighRiskPopulation.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderHighRiskPopulation.value = this.value;
                portionHighRisk = Math.round(this.value) / 100;
                calculate();
            }

            var rangesliderICUPercentageHighRisk = document.getElementById("sliderICUPercentageHighRisk");
            var outputICUPercentageHighRisk = document.getElementById("displayICUPercentageHighRisk");
            outputICUPercentageHighRisk.innerHTML = Intl.NumberFormat().format(rangesliderICUPercentageHighRisk.value / 100);
            rangesliderICUPercentageHighRisk.onchange = function () {
                outputICUPercentageHighRisk.innerHTML = Intl.NumberFormat().format(this.value / 100);
                ratioHighRisk = Math.round(this.value) / 10000;
                inputICUPercentageHighRisk.value = this.value / 100;
                calculate();
            }
            var inputICUPercentageHighRisk = document.getElementById("inputICUPercentageHighRisk");
            inputICUPercentageHighRisk.value = rangesliderICUPercentageHighRisk.value / 100;
            inputICUPercentageHighRisk.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > 10) this.value = 10;
                outputICUPercentageHighRisk.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderICUPercentageHighRisk.value = this.value*100;
                ratioHighRisk = Math.round(this.value) / 100;
                calculate();
            }


            var rangesliderICUPercentageLowRisk = document.getElementById("sliderICUPercentageLowRisk");
            var outputICUPercentageLowRisk = document.getElementById("displayICUPercentageLowRisk");
            outputICUPercentageLowRisk.innerHTML = Intl.NumberFormat().format(rangesliderICUPercentageLowRisk.value / 100);
            rangesliderICUPercentageLowRisk.onchange = function () {
                outputICUPercentageLowRisk.innerHTML = Intl.NumberFormat().format(this.value / 100);
                ratioLowRisk = Math.round(this.value) / 10000;
                inputICUPercentageLowRisk.value = this.value / 100;
                calculate();
            }
            var inputICUPercentageLowRisk = document.getElementById("inputICUPercentageLowRisk");
            inputICUPercentageLowRisk.value = rangesliderICUPercentageLowRisk.value / 100;
            inputICUPercentageLowRisk.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > 10) this.value = 10;
                outputICUPercentageLowRisk.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderICUPercentageLowRisk.value = this.value*100;
                ratioLowRisk = Math.round(this.value) / 100;
                calculate();
            }

            var rangesliderRatioHighRiskGroupCompliance = document.getElementById("sliderRatioHighRiskGroupCompliance");
            var outputRatioHighRiskGroupCompliance = document.getElementById("displayRatioHighRiskGroupCompliance");
            outputRatioHighRiskGroupCompliance.innerHTML = rangesliderRatioHighRiskGroupCompliance.value;
            rangesliderRatioHighRiskGroupCompliance.onchange = function () {
                outputRatioHighRiskGroupCompliance.innerHTML = this.value;
                inputRatioHighRiskGroupCompliance.value = this.value;
                ratioHighRiskCompliance = this.value / 100;
                console.log(ratioHighRiskCompliance);
                calculate();
            }
            var inputRatioHighRiskGroupCompliance = document.getElementById("inputRatioHighRiskGroupCompliance");
            inputRatioHighRiskGroupCompliance.value = rangesliderRatioHighRiskGroupCompliance.value;
            inputRatioHighRiskGroupCompliance.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > 100) this.value = 100;
                outputRatioHighRiskGroupCompliance.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderRatioHighRiskGroupCompliance.value = this.value;
                ratioHighRiskCompliance = Math.round(this.value) / 100;
                calculate();
            }

            var rangesliderFactorUnregistered = document.getElementById("sliderFactorUnregistered");
            var outputFactorUnregistered = document.getElementById("displayFactorUnregistered");
            outputFactorUnregistered.innerHTML = rangesliderFactorUnregistered.value;
            rangesliderFactorUnregistered.onchange = function () {
                outputFactorUnregistered.innerHTML = this.value;
                inputFactorUnregistered.value = this.value;
                darkRatio = this.value;
                calculate();
            }
            var inputFactorUnregistered = document.getElementById("inputFactorUnregistered");
            inputFactorUnregistered.value = rangesliderFactorUnregistered.value;
            inputFactorUnregistered.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > 10) this.value = 10;
                outputFactorUnregistered.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderFactorUnregistered.value = this.value;
                darkRatio = Math.round(this.value);
                calculate();
            }



            var rangesliderUncertaintyModelParameters = document.getElementById("sliderUncertaintyModelParameters");
            var outputUncertaintyModelParameters = document.getElementById("displayUncertaintyModelParameters");
            outputUncertaintyModelParameters.innerHTML = rangesliderUncertaintyModelParameters.value;
            rangesliderUncertaintyModelParameters.onchange = function () {
                outputUncertaintyModelParameters.innerHTML = this.value;
                inputUncertaintyModelParameters.value = this.value;
                modelUncertainty = this.value / 100;
                calculate();
            }
            var inputUncertaintyModelParameters = document.getElementById("inputUncertaintyModelParameters");
            inputUncertaintyModelParameters.value = rangesliderUncertaintyModelParameters.value;
            inputUncertaintyModelParameters.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > 20) this.value = 20;
                outputUncertaintyModelParameters.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderUncertaintyModelParameters.value = this.value;
                modelUncertainty = Math.round(this.value)/100;
                calculate();
            }

            var rangesliderUncertaintyAntibodyTest = document.getElementById("sliderUncertaintyAntibodyTest");
            var outputUncertaintyAntibodyTest = document.getElementById("displayUncertaintyAntibodyTest");
            outputUncertaintyAntibodyTest.innerHTML = rangesliderUncertaintyAntibodyTest.value;
            rangesliderUncertaintyAntibodyTest.onchange = function () {
                outputUncertaintyAntibodyTest.innerHTML = this.value;
                inputUncertaintyAntibodyTest.value = this.value;
                accuracyAntibodyTests = this.value / 100;
                calculate();
            }
            var inputUncertaintyAntibodyTest = document.getElementById("inputUncertaintyAntibodyTest");
            inputUncertaintyAntibodyTest.value = rangesliderUncertaintyAntibodyTest.value;
            inputUncertaintyAntibodyTest.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > 20) this.value = 20;
                outputUncertaintyAntibodyTest.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderUncertaintyAntibodyTest.value = this.value;
                accuracyAntibodyTests = Math.round(this.value)/100;
                calculate();
            }

            var rangesliderUncertaintyRatio = document.getElementById("sliderUncertaintyRatio");
            var outputUncertaintyRatio = document.getElementById("displayUncertaintyRatio");
            outputUncertaintyRatio.innerHTML = rangesliderUncertaintyRatio.value;
            rangesliderUncertaintyRatio.onchange = function () {
                outputUncertaintyRatio.innerHTML = this.value;
                inputUncertaintyRatio.value = this.value;
                uncertaintyRatios = this.value / 100;
                calculate();
            }
            var inputUncertaintyRatio = document.getElementById("inputUncertaintyRatio");
            inputUncertaintyRatio.value = rangesliderUncertaintyRatio.value;
            inputUncertaintyRatio.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > 20) this.value = 20;
                outputUncertaintyRatio.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderUncertaintyRatio.value = this.value;
                uncertaintyRatios = Math.round(this.value)/100;
                calculate();
            }

            var rangesliderDelayTime = document.getElementById("sliderDelayTime");
            var outputDelayTime = document.getElementById("displayDelayTime");
            outputDelayTime.innerHTML = rangesliderDelayTime.value;
            rangesliderDelayTime.onchange = function () {
                outputDelayTime.innerHTML = this.value;
                inputDelayTime.value = this.value;
                delay = Math.round(this.value);
                calculate();
            }
            var inputDelayTime= document.getElementById("inputDelayTime");
            inputDelayTime.value = rangesliderDelayTime.value;
            inputDelayTime.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > 30) this.value = 30;
                outputDelayTime.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderDelayTime.value = this.value;
                delay = Math.round(this.value);
                calculate();
            }


            var rangesliderCapacity = document.getElementById("sliderCapacity");
            var outputCapacity = document.getElementById("displayCapacity");
            outputCapacity.innerHTML = Intl.NumberFormat().format(rangesliderCapacity.value);
            rangesliderCapacity.onchange = function () {
                outputCapacity.innerHTML = Intl.NumberFormat().format(this.value);
                inputCapacity.value = this.value;
                ICUcapacity = Math.round(this.value);
                calculate();
            }
            var inputCapacity= document.getElementById("inputCapacity");
            inputCapacity.value = rangesliderCapacity.value;
            inputCapacity.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > 50000) this.value = 50000;
                outputCapacity.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderCapacity.value = this.value;
                ICUcapacity = Math.round(this.value);
                calculate();
            }

            var rangesliderCapacityIncrease = document.getElementById("sliderCapacityIncrease");
            var outputCapacityIncrease = document.getElementById("displayCapacityIncrease");
            outputCapacityIncrease.innerHTML = rangesliderCapacityIncrease.value;
            rangesliderCapacityIncrease.onchange = function () {
                outputCapacityIncrease.innerHTML = this.value;
                inputCapacityIncrease.value = this.value;
                addCapacity = this.value;
                calculate();
            }
            var inputCapacityIncrease= document.getElementById("inputCapacityIncrease");
            inputCapacityIncrease.value = rangesliderCapacityIncrease.value;
            inputCapacityIncrease.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > 500) this.value = 500;
                outputCapacityIncrease.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderCapacityIncrease.value = this.value;
                addCapacity = Math.round(this.value);
                calculate();
            }

            var rangesliderUncertaintyInteraction = document.getElementById("sliderUncertaintyInteraction");
            var outputUncertaintyInteraction = document.getElementById("displayUncertaintyInteraction");
            outputUncertaintyInteraction.innerHTML = rangesliderUncertaintyInteraction.value;
            rangesliderUncertaintyInteraction.onchange = function () {
                outputUncertaintyInteraction.innerHTML = this.value;
                inputUncertaintyInteraction.value = this.value;
                uInaccur = this.value / 100;
                calculate();
            }
            var inputUncertaintyInteraction= document.getElementById("inputUncertaintyInteraction");
            inputUncertaintyInteraction.value = rangesliderUncertaintyInteraction.value;
            inputUncertaintyInteraction.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > 10) this.value = 10;
                outputUncertaintyInteraction.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderUncertaintyInteraction.value = this.value;
                uInaccur = Math.round(this.value) / 100;
                calculate();
            }


            var rangesliderLowerLevel = document.getElementById("sliderLowerLevel");
            var outputLowerLevel = document.getElementById("displayLowerLevel");
            outputLowerLevel.innerHTML = rangesliderLowerLevel.value;
            rangesliderLowerLevel.onchange = function () {
                outputLowerLevel.innerHTML = this.value;
                inputLowerLevel.value = this.value;
                lowerLevel = this.value / 100;
                calculate();
            }
            var inputLowerLevel= document.getElementById("inputLowerLevel");
            inputLowerLevel.value = rangesliderLowerLevel.value;
            inputLowerLevel.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > 100) this.value = 100;
                outputLowerLevel.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderLowerLevel.value = this.value;
                lowerLevel = Math.round(this.value) / 100;
                calculate();
            }

            var rangesliderHigherLevel = document.getElementById("sliderHigherLevel");
            var outputHigherLevel = document.getElementById("displayHigherLevel");
            outputHigherLevel.innerHTML = rangesliderHigherLevel.value;
            rangesliderHigherLevel.onchange = function () {
                outputHigherLevel.innerHTML = this.value;
                inputHigherLevel.value = this.value;
                upperLevel = this.value / 100;
                calculate();
            }
            var inputHigherLevel= document.getElementById("inputHigherLevel");
            inputHigherLevel.value = rangesliderHigherLevel.value;
            inputHigherLevel.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > 100) this.value = 100;
                outputHigherLevel.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderHigherLevel.value = this.value;
                upperLevel = Math.round(this.value) / 100;
                calculate();
            }

            var rangesliderEndDate = document.getElementById("sliderEndDate");
            var outputEndDate = document.getElementById("displayEndDate");
            outputEndDate.innerHTML = rangesliderEndDate.value;
            rangesliderEndDate.onchange = function () {
                if (this.value > T - 1) this.value = T - 1;
                outputEndDate.innerHTML = this.value;
                inputEndDate.value = this.value;
                endDate = Math.round(this.value);
                calculate();
            }
            var inputEndDate= document.getElementById("inputEndDate");
            inputEndDate.value = rangesliderEndDate.value;
            inputEndDate.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > T - 1) this.value = T -1;
                outputEndDate.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderEndDate.value = this.value;
                endDate = Math.round(this.value) / 100;
                calculate();
            }

            var rangesliderInteractionAfterEndDate = document.getElementById("sliderInteractionAfterEndDate");
            var outputInteractionAfterEndDate = document.getElementById("displayInteractionAfterEndDate");
            outputInteractionAfterEndDate.innerHTML = rangesliderInteractionAfterEndDate.value;
            rangesliderInteractionAfterEndDate.onchange = function () {
                outputInteractionAfterEndDate.innerHTML = this.value;
                inputInteractionAfterEndDate.value = this.value;
                finalLevel = this.value / 100;
                calculate();
            }
            var inputInteractionAfterEndDate= document.getElementById("inputInteractionAfterEndDate");
            inputInteractionAfterEndDate.value = rangesliderInteractionAfterEndDate.value;
            inputInteractionAfterEndDate.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > 100) this.value = 100;
                outputInteractionAfterEndDate.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderInteractionAfterEndDate.value = this.value;
                finalLevel = Math.round(this.value) / 100;
                calculate();
            }

            var rangesliderSimulations = document.getElementById("sliderSimulations");
            var outputSimulations = document.getElementById("displaySimulations");
            outputSimulations.innerHTML = rangesliderSimulations.value;
            rangesliderSimulations.onchange = function () {
                outputSimulations.innerHTML = this.value;
                inputsliderSimulations.value = this.value;
                numberCycles = this.value;
                calculate();
            }
            var inputSimulations= document.getElementById("inputSimulations");
            inputSimulations.value = rangesliderSimulations.value;
            inputSimulations.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > 100) this.value = 100;
                outputsliderSimulations.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderSimulations.value = this.value;
                numberCycles = Math.round(this.value);
                calculate();
            }

            var rangesliderDuration = document.getElementById("sliderDuration");
            var outputDuration = document.getElementById("displayDuration");
            outputDuration.innerHTML = rangesliderDuration.value;
            rangesliderDuration.onchange = function () {
                outputDuration.innerHTML = this.value;
                inputDuration.value = this.value;
                T = Math.round(this.value);
                // check an potentiall correct end date
                if (T - 1 < endDate) {

                    rangesliderEndDate.value = T - 2;
                    outputEndDate.innerHTML = T - 2;
                    inputEndDate.value = T - 2;
                    endDate = T - 2;
                }
                calculate();
            }
            var inputDuration= document.getElementById("inputDuration");
            inputDuration.value = rangesliderDuration.value;
            inputDuration.onchange = function () {
                if (this.value < 0) this.value = 0;
                if (this.value > 730) this.value = 730;
                outputDuration.innerHTML = Intl.NumberFormat().format(this.value);
                rangesliderDuration.value = this.value;
                T = Math.round(this.value);
                // check an potentiall correct end date
                if (T - 1 < endDate) {

                    rangesliderEndDate.value = T - 2;
                    outputEndDate.innerHTML = T - 2;
                    inputEndDate.value = T - 2;
                    endDate = T - 2;
                }
                calculate();
            }

            // determine results
            calculate();


            function calculate() {

                // variable definition

                var iHerdImmunityReached;           // point in time when herd immunity is reached
                var herdImmunityReached;            // flag indicating whether herd immunity is reached
                var counter;                        // counter for lockdown
                var startLevelReached;
                var startLevelAlwaysReached;
                var iStartLevelReached;
                var redPopOnly;


                // initialize simulation data
                simData[0][0] = seriesLabels[0][language]; 'Day';
                simData[0][1] = seriesLabels[3][language];//'Empfängliche';
                simData[0][2] = seriesLabels[4][language];//'Ansteckende Infizierte';
                simData[0][3] = seriesLabels[5][language];//'Genesene/Verstorbene';
                simData[0][4] = seriesLabels[2][language];//'Patienten auf Intensivstation';
                simData[0][5] = seriesLabels[6][language];//'Umsetzung der Kontakteinschränkung';
                simData[0][6] = seriesLabels[1][language];//'Plätze auf Intensivstation';
                simData[0][7] = 'min Registered';
                simData[0][8] = 'max Registered';
                simData[0][9] = 'Empfängliche niedriges Risiko';
                simData[0][10] = 'Empfängliche hohes Risiko';
                simData[0][11] = 'Ansteckende Infizierte niedriges Risiko';
                simData[0][12] = 'Ansteckende Infizierte hohes Risiko';
                simData[0][13] = 'Patienten auf Intensivstation niedriges Risiko';
                simData[0][14] = 'Patienten auf Intensivstation hohes Risiko';
                simData[0][15] = seriesLabels[9][language];//"Verstorbene";
                simData[0][16] = "Verstorbene niedriges Risiko";
                simData[0][17] = "Verstorbene hohes Risiko";
                simData[0][18] = "min Verstorbene";
                simData[0][19] = "max Verstorbene";
                simData[0][20] = "Wirtschaftlicher Schaden [in Mrd. ]";
                simData[0][21] = "min wirtschaftlicher Schaden";
                simData[0][22] = "max wirtschaftlicher Schaden";
                simData[0][23] = seriesLabels[7][language];//'Vorgabe der Kontakteinschränkung';
                simData[0][24] = 'Registrierte Genesene';
                simData[0][25] = 'Registrierte Genesene low risk';
                simData[0][26] = 'Registrierte Genesene high risk';
                simData[0][27] = 'Empfängliche hohes Risiko nicht kompliant';
                simData[0][28] = 'Ansteckende Infizierte hohes Risiko nicht kompliant';
                simData[0][29] = 'Patienten auf Intensivstation hohes Risiko nicht kompliant';
                simData[0][30] = 'Verstorbene hohes Risiko nicht kompliant';
                simData[0][31] = 'Registrierte Genesene high risk nicht kompliant';
                simData[0][32] = seriesLabels[8][language];//'Gleitender Durchschnitt der Kontakteinschränkungen';
                simData[0][33] = 'Neuinfektionen';

                // set model parameters for simulation
                var alphaMod = [];
                var betaMod = [];
                var sus = [];
                var susLR = [];
                var susHR = [];
                var susHRnc = [];
                var inf = [];
                var infLR = [];
                var infHR = [];
                var infHRnc = [];
                var rec = [];
                var dec = [];
                var u = [];


                // set  variations for model parameters
                alphaMod[0] = alpha * (1 + modelUncertainty);
                alphaMod[1] = alpha * (1 - modelUncertainty);
                alphaMod[2] = alpha;
                alphaMod[3] = alpha;
                alphaMod[4] = alpha;

                betaMod[0] = beta;
                betaMod[1] = beta;
                betaMod[2] = beta * (1 + modelUncertainty);
                betaMod[3] = beta * (1 - modelUncertainty);
                betaMod[4] = beta;

                // initialize simulation data
                u[0] = 0;
                for (i = 1; i < T + 1; i++) {
                    for (j = 0; j < 34; j++) {
                        simData[i][j] = 0;
                    }
                    simData[i][7] = Npop;
                    simData[i][18] = Npop;
                    simData[i][6] = ICUcapacity + i * addCapacity;
                    simData[i][21] = 1E10;
                    u[i] = 0;
                }

                for (i = 0; i < 8; i++) {
                    sus[i] = 0;
                    susLR[i] = 0;
                    susHR[i] = 0;
                    susHRnc[i] = 0;
                    inf[i] = 0;
                    infLR[i] = 0;
                    infHR[i] = 0;
                    infHRnc[i] = 0;
                    rec[i] = 0;
                    dec[i] = 0;
                }


                herdImmunityAlwaysReached = true;
                startLevelAlwaysReached = true;
                iHerdImmunity = 0;
                iStartLevelReached = 0;

                for (cycle = 0; cycle < numberCycles; cycle++) {

                    // initialize simulation variables
                    simData[1][0] = 1;
                    if (option == 0) simData[1][1] = Npop - initialInfected;
                    if (option == 1 || option == 2) simData[1][1] = (Npop-initialInfected) * (1 - portionHighRisk);
                    simData[1][2] = initialInfected * darkRatio;
                    simData[1][3] = 0;
                    simData[1][4] = null;
                    simData[1][5] = upperLevel;
                    simData[1][6] = ICUcapacity;
                    simData[1][7] = 0;
                    simData[1][8] = 0;
                    simData[1][9] = (Npop-initialInfected) * (1 - portionHighRisk);
                    simData[1][10] = (Npop-initialInfected) * portionHighRisk * ratioHighRiskCompliance;
                    simData[1][27] =  (Npop-initialInfected) * portionHighRisk * (1 - ratioHighRiskCompliance);
                    console.log(simData[1][27]);
                    simData[1][11] = initialInfected * (1 - portionHighRisk) * darkRatio;
                    simData[1][12] = initialInfected * portionHighRisk * ratioHighRiskCompliance * darkRatio;
                    simData[1][28] = initialInfected * portionHighRisk * (1 - ratioHighRiskCompliance) * darkRatio;
                    simData[1][13] = null;
                    simData[1][14] = null;
                    simData[1][29] = null;
                    simData[1][15] = 0;
                    simData[1][16] = 0;
                    simData[1][17] = 0;
                    simData[1][18] = 0;
                    simData[1][19] = 0;
                    simData[1][20] = 0;
                    simData[1][21] = 0;
                    simData[1][22] = 0;
                    simData[1][23] = 0;
                    simData[1][24] = 0;
                    simData[1][25] = 0;
                    simData[1][26] = 0;
                    simData[1][30] = 0;
                    simData[1][31] = 0;
                    simData[1][32] = lowerLevel;



                    for (model = 0; model < 5; model++) {
                        herdImmunityReached = false;
                        startLevelReached = false;
                        counter = 0;
                        // calculate amount of infected and recovered for herd immunita
                        nHerdImmunity = Npop - betaMod[model] * Npop / (alphaMod[model] * finalLevel);

                        // loop over time steps
                        for (i = 1; i < T; i++) {

                            redPopOnly = ((option == 1 || option == 2) && (i <= endDate) && (i > 1));

                            // determine relevant population (either entire population of population minus high-risk group)
                            Nrel = Npop;
                            if (option == 1 || option == 2) {
                                if (i <= endDate) Nrel = Npop * (1 - portionHighRisk * ratioHighRiskCompliance);
                                if (i == 1) {
                                    simData[i][1] = Npop-initialInfected;
                                    simData[i][9] = (Npop-initialInfected) * (1 - portionHighRisk);
                                    simData[i][10] = (Npop-initialInfected) * portionHighRisk * ratioHighRiskCompliance;
                                    simData[i][27] = (Npop-initialInfected) * portionHighRisk * (1 - ratioHighRiskCompliance);
                                }
                                if (i == 2) {
                                    popSecured = simData[i][10];
                                    simData[i][1] -= popSecured;
                                    simData[i][10] -= popSecured;
                                }
                            }

                            simData[i][5] = upperLevel;
                            simData[i + 1][5] = upperLevel;

                            // choose the optimal interaction level

                            // predictive model
                            if (strategy == 3) {
                                if (i > delay - 1) {

                                    // loop over all models
                                    for (j = 0; j < 5; j++) {

                                        // calculate impact on population

                                        // initialize prediction
                                        susLR[0] = simData[i - delay][9] * (1 + accuracyAntibodyTests);     // consider worst case 10% Error in susceptibles
                                        susHR[0] = simData[i - delay][10] * (1 + accuracyAntibodyTests);    // consider worst case 10% Error in susceptibles
                                        susHRnc[0] = simData[i - delay][27] * (1 + accuracyAntibodyTests);    // consider worst case 10% Error in susceptibles
                                        sus[0] = susLR[0] + susHR[0] + susHRnc[0];

                                        infLR[0] = simData[i][13] / (ratioLowRisk * (1 - uncertaintyRatios));       // consider worst case 10% error in ratio
                                        infHR[0] = simData[i][14] / (ratioHighRisk * (1 - uncertaintyRatios));      // consider worst case 10% error in ratio
                                        infHRnc[0] = simData[i][29] / (ratioHighRisk * (1 - uncertaintyRatios));      // consider worst case 10% error in ratio
                                        inf[0] = infLR[0] + infHR[0] + infHRnc[0];

                                        // simulate scenarios
                                        for (k = 0; k < 2; k++) {
                                            if (k == 0) u[i] = upperLevel;
                                            else u[i] = lowerLevel;
                                            for (l = 0; l < delay + 1; l++) {
                                                susLR[l + 1] = Math.round(susLR[l] - (u[l + i - delay] + uInaccur) * alphaMod[j] / Nrel * susLR[l] * inf[l]);
                                                susHRnc[l + 1] = Math.round(susHRnc[l] - (u[l + i - delay] + uInaccur) * alphaMod[j] / Nrel * susHRnc[l] * inf[l]);
                                                if (redPopOnly) susHR[l + 1] = susHR[l];
                                                else
                                                    susHR[l + 1] = Math.round(susHR[l] - (u[l + i - delay] + uInaccur) * alphaMod[j] / Nrel * susHR[l] * inf[l]);
                                                sus[l + 1] = susLR[l + 1] + susHR[l + 1] + susHRnc[l + 1];

                                                infLR[l + 1] = Math.round(infLR[l] + (u[l + i - delay] + uInaccur) * alphaMod[j] / Nrel * susLR[l] * inf[l] - betaMod[j] * infLR[l]);
                                                infHRnc[l + 1] = Math.round(infHRnc[l] + (u[l + i - delay] + uInaccur) * alphaMod[j] / Nrel * susHRnc[l] * inf[l] - betaMod[j] * infHRnc[l]);
                                                if (redPopOnly) infHR[l + 1] = infHR[l] - betaMod[j] * infHR[l];
                                                else
                                                    infHR[l + 1] = Math.round(infHR[l] + (u[l + i - delay] + uInaccur) * alphaMod[j] / Nrel * susHR[l] * inf[l] - betaMod[j] * infHR[l]);
                                                inf[l + 1] = infLR[l + 1] + infHR[l + 1] + infHRnc[l + 1];
                                            }
                                            if (infLR[delay + 1] * ratioLowRisk + (infHR[delay + 1] + infHRnc[delay + 1]) * ratioHighRisk > simData[i + 1][6]) simData[i][5] = lowerLevel;
                                        }
                                    }
                                }
                                else simData[i][5] = lowerLevel;
                            }

                            if (herdImmunityReached && counter <= 21 && option == 2) {
                                simData[i][5] = 0.2;
                                counter++;
                            }

                            // measures base on current infection rate
                            if (strategy == 4) {
                                if (i < delay + 7) simData[i][5] = lowerLevel;
                                else {
                                    // count new infections in last 7 days
                                    newInfections = 0;
                                    for (j = 0; j < 7; j++) newInfections += simData[i - delay - j][33];
                                    //console.log(newInfections);
                                    //if (simData[i - delay][2] - simData[i - delay - 7][2] < Npop / 100000 * 50) simData[i][5] = upperLevel;
                                    if (newInfections / darkRatio < (Npop / 100000) * 50) simData[i][5] = upperLevel;
                                    else simData[i][5] = lowerLevel;
                                }
                            }

                            if (i > endDate) {
                                simData[i][5] = finalLevel;
                            }

                            // if end date is reached, add the high-risk group to the susceptibles
                            if (i == endDate && (option == 1 || option == 2)) simData[i][10] += popSecured;//Npop * portionHighRisk * ratioHighRiskCompliance;

                            if (strategy == 0) simData[i][5] = 1;



                            if (i == T) simData[i][5] = simData[i - 1][5];

                            u[i] = simData[i][5];
                            simData[i][23] = u[i];
                            simData[i][5] += 2 * (Math.random() - 0.5) * uInaccur;
                            if (simData[i][5] < 0) simData[i][5] = 0;

                            // assure consistens display of last data point
                            simData[i + 1][23] = simData[i][23];
                            simData[i + 1][5] = simData[i][5];

                            simData[i + 1][0] = i + 1;
                            simData[i + 1][4] = 0;

                            // determine rolling average of contacts
                            if (i > 1) {
                                if (i < 15)
                                    simData[i][32] = simData[i - 1][32] + simData[i][5] / 14 - simData[1][5] / 14;
                                else
                                    simData[i][32] = simData[i - 1][32] + simData[i][5] / 14 - simData[i - 14][5] / 14;
                            }
                            else simData[i][32] = simData[1][5];

                            simData[i + 1][32] = simData[i][32];

                            // determine new number of susceptibles
                            simData[i + 1][9] = Math.round(simData[i][9] - alphaMod[model] / Nrel * simData[i][5] * simData[i][9] * simData[i][2]);
                            simData[i + 1][27] = Math.round(simData[i][27] - alphaMod[model] / Nrel * simData[i][5] * simData[i][27] * simData[i][2]);
                            if (redPopOnly) simData[i + 1][10] = simData[i][10];
                            else simData[i + 1][10] = Math.round(simData[i][10] - alphaMod[model] / Nrel * simData[i][5] * simData[i][10] * simData[i][2]);
                            simData[i + 1][1] = simData[i + 1][9] + simData[i + 1][10] + simData[i + 1][27];

                            // determine new number of infected
                            simData[i + 1][11] = Math.round(simData[i][11] + alphaMod[model] / Nrel * simData[i][5] * simData[i][9] * simData[i][2] - betaMod[model] * simData[i][11]);
                            simData[i + 1][28] = Math.round(simData[i][28] + alphaMod[model] / Nrel * simData[i][5] * simData[i][27] * simData[i][2] - betaMod[model] * simData[i][28]);

                            simData[i + 1][33] = Math.round(alphaMod[model] / Nrel * simData[i][5] * simData[i][9] * simData[i][2] + alphaMod[model] / Nrel * simData[i][5] * simData[i][27] * simData[i][2]);
                            if (!redPopOnly) simData[i + 1][33] += alphaMod[model] / Nrel * simData[i][5] * simData[i][10] * simData[i][2];

                            if (redPopOnly) simData[i + 1][12] = simData[i][12] - betaMod[model] * simData[i][12];
                            else
                                simData[i + 1][12] = Math.round(simData[i][12] + alphaMod[model] / Nrel * simData[i][5] * simData[i][10] * simData[i][2] - betaMod[model] * simData[i][12]);

                            simData[i + 1][2] = simData[i + 1][11] + simData[i + 1][12] + simData[i + 1][28];

                            // determine new number of recovered
                            simData[i + 1][3] = Math.round(simData[i][3] + betaMod[model] * simData[i][2]);

                            // determine new number of registered
                            if (i > delay - 1) {
                                simData[i + 1][13] = Math.round(ratioLowRisk * (1 + 2 * (Math.random() - 0.5) * accuracyAntibodyTests) / darkRatio * simData[i + 1 - delay][11]);
                                simData[i + 1][14] = Math.round(ratioHighRisk * (1 + 2 * (Math.random() - 0.5) * accuracyAntibodyTests) / darkRatio * simData[i + 1 - delay][12]);
                                simData[i + 1][29] = Math.round(ratioHighRisk * (1 + 2 * (Math.random() - 0.5) * accuracyAntibodyTests) / darkRatio * simData[i + 1 - delay][28]);
                                simData[i + 1][4] = simData[i + 1][13] + simData[i + 1][14] + simData[i + 1][29];
                            }
                            else {
                                simData[i + 1][13] = null;
                                simData[i + 1][14] = null;
                                simData[i + 1][29] = null;
                                simData[i + 1][4] = null;
                            }

                            // determine number of registered recovered


                            // determine new number of deceased
                            // in case capacity is sufficient
                            if (simData[i + 1][6] > simData[i + 1][4])
                                simData[i + 1][15] = Math.round(simData[i][15] + simData[i + 1][4] * betaMod[model] * 0.29);
                            else
                                simData[i + 1][15] = Math.round(simData[i][15] + simData[i + 1][6] * betaMod[model] * 0.29 + (simData[i + 1][4] - simData[i + 1][6]) * betaMod[model]);

                            // determine economic impact
                            if (simData[i][23] <= 0.2) simData[i + 1][20] = simData[i][20] + 5;
                            if (simData[i][23] > 0.2 && simData[i][23] < 0.9)
                                //simData[i + 1][20] = simData[i][20] + (1 - (3 * Math.pow((simData[i][5] - 0.2) / 0.7, 2) - 2 * Math.pow((simData[i][5] - 0.2) / 0.7, 3))) * 5;
                                simData[i + 1][20] = simData[i][20] + 5 * (1 - (simData[i][23] - 0.2) / 0.7);
                            if (simData[i][23] >= 0.9) simData[i + 1][20] = simData[i][20];

                            // update min and max values
                            if (simData[i + 1][4] > simData[i + 1][8]) simData[i + 1][8] = simData[i + 1][4];
                            if (simData[i + 1][4] < simData[i + 1][7]) simData[i + 1][7] = simData[i + 1][4];

                            if (simData[i + 1][15] > simData[i + 1][19]) simData[i + 1][19] = simData[i + 1][15];
                            if (simData[i + 1][15] < simData[i + 1][18]) simData[i + 1][18] = simData[i + 1][15];

                            if (simData[i + 1][20] > simData[i + 1][22]) simData[i + 1][22] = simData[i + 1][20];
                            if (simData[i + 1][20] < simData[i + 1][21]) simData[i + 1][21] = simData[i + 1][20];

                            // check if herd immunity has been reached for final level of interaction
                            if (simData[i + 1][2] + simData[i + 1][3] > nHerdImmunity && !herdImmunityReached) {
                                herdImmunityReached = true;
                                if (i + 1 > iHerdImmunity) iHerdImmunity = i + 1;
                            }

                            // check if start level is reached (only if herd immunity is reached)
                            if (herdImmunityReached && simData[i + 1][2] < initialInfected && !startLevelReached) {
                                startLevelReached = true;
                                if (i + 1 > iStartLevelReached) iStartLevelReached = i + 1;
                            }
                        }
                        // if herd immunity was not reached for the current model is was not always reached
                        if (!herdImmunityReached) herdImmunityAlwaysReached = false;
                        if (!startLevelReached) startLevelAlwaysReached = false;
                    }
                }

                // extract data for overview
                var viewData1 = [];
                for (i = 0; i < T + 1; i++) {
                    viewData1[i] = [];
                }
                for (i = 0; i < T + 1; i++) {
                    for (j = 0; j < 4; j++) {
                        viewData1[i][j] = simData[i][j];
                    }
                }

                // extract data for overview
                var viewData2 = [];
                for (i = 0; i < T + 1; i++) {
                    viewData2[i] = [];
                }

                for (i = 0; i < T + 1; i++) {
                    viewData2[i][0] = simData[i][0];
                    viewData2[i][1] = simData[i][6];
                    viewData2[i][2] = simData[i][7];
                    viewData2[i][3] = simData[i][4];
                    viewData2[i][4] = simData[i][8];
                    if (i > 0) {
                        viewData2[i][2] = simData[i][7] - simData[i][6];
                        viewData2[i][3] = simData[i][4] - simData[i][7];
                        viewData2[i][4] = simData[i][8] - simData[i][4];
                    }
                }

                var viewData3 = [];
                for (i = 0; i < T + 1; i++) {
                    viewData3[i] = [];
                }
                for (i = 0; i < T + 1; i++) {
                    viewData3[i][0] = simData[i][0];
                    viewData3[i][1] = simData[i][5];
                    viewData3[i][2] = simData[i][32];
                    viewData3[i][3] = simData[i][23];
                    if (i > 0) {
                        viewData3[i][1] = (-viewData3[i][1] + 1);
                        viewData3[i][2] = (-viewData3[i][2] + 1);
                        viewData3[i][3] = (-viewData3[i][3] + 1);
                    }
                }

                var viewData4 = [];
                for (i = 0; i < T + 1; i++) {
                    viewData4[i] = [];
                }
                for (i = 0; i < T + 1; i++) {
                    viewData4[i][0] = simData[i][0];
                    viewData4[i][1] = simData[i][18];
                    viewData4[i][2] = simData[i][15];
                    viewData4[i][3] = simData[i][19];
                    if (i > 0) {
                        viewData4[i][1] = simData[i][18];
                        viewData4[i][2] = simData[i][15] - simData[i][18];
                        viewData4[i][3] = simData[i][19] - simData[i][15];
                    }
                }


                // gather data for evaluation of economic impact
                var viewData5 = [];
                for (i = 0; i < T + 1; i++) {
                    viewData5[i] = [];
                }
                for (i = 0; i < T + 1; i++) {
                    viewData5[i][0] = simData[i][0];
                    viewData5[i][1] = simData[i][21];
                    viewData5[i][2] = simData[i][20];
                    viewData5[i][3] = simData[i][22];
                    if (i > 0) {
                        viewData5[i][1] = simData[i][21];
                        viewData5[i][2] = simData[i][20] - simData[i][21];
                        viewData5[i][3] = simData[i][22] - simData[i][20];
                    }
                }

                google.charts.load('current', { 'packages': ['corechart'] });
                google.charts.setOnLoadCallback(drawChart);

                function drawChart() {

                    var data = google.visualization.arrayToDataTable(viewData1);

                    // add annotations
                    data.insertColumn(4, { type: 'string', role: 'annotationText' });
                    data.insertColumn(4, { type: 'string', role: 'annotation' });

                    data.insertColumn(3, { type: 'string', role: 'annotationText' });
                    data.insertColumn(3, { type: 'string', role: 'annotation' });

                    data.insertColumn(2, { type: 'string', role: 'annotationText' });
                    data.insertColumn(2, { type: 'string', role: 'annotation' });

                    data.addColumn({ type: 'string', role: 'annotation' });
                    data.addColumn({ type: 'string', role: 'annotationText' });

                    if (option == 1 || option == 2) {
                        data.setCell(1, 2, 'Empfägliche (susceptible)', graphAnnotations[0][language]);
                        data.setCell(endDate, 2, 'Empfägliche (susceptible)', graphAnnotations[1][language]);
                    }


                    if (herdImmunityAlwaysReached) data.setCell(iHerdImmunity, 8, 'Genesene (recovered)', graphAnnotations[2][language]);
                    else data.setCell(T - 2, 8, 'Genesene (recovered)', graphAnnotations[3][language]);

                    if (startLevelAlwaysReached) data.setCell(iStartLevelReached, 5, 'Infizierte (infected)', graphAnnotations[4][language]);
                    else data.setCell(T - 2, 5, 'Infizierte (infected)', graphAnnotations[5][language]);

                    var options = {
                        title: titles[1][language],
                        curveType: 'none',
                        fontSize: graphFontSize,
                        legend: { position: 'bottom' },
                        hAxis: {
                            title: seriesLabels[0][language],
                        },
                        vAxes: {
                            0: { format: 'short', type: "line", targetAxisIndex: 0 },
                            1: { format: 'short', type: "line", targetAxisIndex: 1 },
                        },
                        series: {
                            0: { targetAxisIndex: 0, annotations: { style: { type: 'line', }, stem: { length: 50, color: '#3366CC' } }, interpolateNulls: false },
                            1: { targetAxisIndex: 0, annotations: { style: { type: 'line', }, stem: { length: 20, color: '#DC3912' } }, interpolateNulls: false },
                            2: { targetAxisIndex: 0, annotations: { style: { type: 'line', }, stem: { length: 50, color: '#FF9900' } }, interpolateNulls: false }
                        },
                        backgroundColor: { stroke: 'black', strokeWidth: 2 },
                    };


                    var chart = new google.visualization.ComboChart(document.getElementById('curve_chart'));
                    chart.draw(data, options);

                    var data2 = google.visualization.arrayToDataTable(viewData2);
                    var options2 = {
                        title: titles[0][language],
                        curveType: 'none',
                        fontSize: graphFontSize,
                        legend: { position: 'bottom' },
                        vAxes: {
                            0: { format: 'short' }
                        },
                        isStacked: 'true',
                        hAxis: {
                            title: seriesLabels[0][language],

                        },
                        seriesType: 'area',
                        enableInteractivity: false,
                        series: {
                            0: { targetAxisIndex: 0, color: '#DC3912', lineWidth: 2, areaOpacity: 0, interpolateNulls: false },
                            1: { targetAxisIndex: 0, color: '#3366CC', lineWidth: 0, areaOpacity: 0, visibleInLegend: false, interpolateNulls: false },
                            2: { targetAxisIndex: 0, color: '#3366CC', lineWidth: 2, areaOpacity: 0.2, interpolateNulls: false },
                            3: { targetAxisIndex: 0, color: '#3366CC', lineWidth: 0, areaOpacity: 0.2, visibleInLegend: false, interpolateNulls: false },
                        },
                        backgroundColor: 'white',
                        backgroundColor: { stroke: 'black', strokeWidth: 2 },
                    };

                    var chart2 = new google.visualization.ComboChart(document.getElementById('curve_chart_2'));
                    chart2.draw(data2, options2);



                    var data3 = google.visualization.arrayToDataTable(viewData3);
                    var options3 = {
                        title: titles[2][language],
                        curveType: 'none',
                        fontSize: graphFontSize,
                        legend: { position: 'bottom' },
                        vAxes: {
                            0: { format: '#.###%' }
                        },
                        hAxis: {
                            title: seriesLabels[0][language],
                        },
                        series: {
                            0: { targetAxisIndex: 0, color: '#3366CC', lineWidth: 2, areaOpacity: 0 },
                            1: { targetAxisIndex: 0, color: '#DC3912', lineWidth: 2, areaOpacity: 0 },
                            2: { targetAxisIndex: 0, color: '#FF9900', lineWidth: 2, areaOpacity: 0 },
                        },
                        vAxis: {
                            viewWindowMode: 'explicit',
                            viewWindow: {
                                max: 1,
                                min: 0
                            }
                        },
                        backgroundColor: { stroke: 'black', strokeWidth: 2 },
                    };
                    var chart3 = new google.visualization.ComboChart(document.getElementById('curve_chart_3'));
                    chart3.draw(data3, options3);


                    var data4 = google.visualization.arrayToDataTable(viewData4);
                    var options4 = {
                        title: titles[3][language],
                        curveType: 'none',
                        fontSize: graphFontSize,
                        legend: { position: 'bottom' },
                        vAxes: {
                            0: { format: 'short' },
                            1: { format: 'short', minValue: 0, maxValue: 1 }
                        },
                        isStacked: 'true',
                        hAxis: {
                            title: seriesLabels[0][language],
                        },
                        seriesType: 'area',
                        enableInteractivity: false,
                        series: {
                            0: { targetAxisIndex: 0, color: '#3366CC', lineWidth: 0, areaOpacity: 0, visibleInLegend: false },
                            1: { targetAxisIndex: 0, color: '#3366CC', lineWidth: 2, areaOpacity: 0.2 },
                            2: { targetAxisIndex: 0, color: '#3366CC', lineWidth: 0, areaOpacity: 0.2, visibleInLegend: false },
                        },
                        backgroundColor: { stroke: 'black', strokeWidth: 2 },
                    };
                    var chart4 = new google.visualization.ComboChart(document.getElementById('curve_chart_4'));
                    chart4.draw(data4, options4);
                }
            }
        </script>
    </font>
</body>
</html>
